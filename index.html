<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Strange Interfaces</title>
    <link
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        font-family: "VT323", monospace;
      }

      #video-background {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: -1;
        object-fit: cover;
      }

      #p5-canvas {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <video id="video-background" autoplay loop muted playsinline>
      <source src="strange.mov" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <div id="p5-canvas"></div>
    <script>
      let glitchIntensity = 0;
      let showStrangeInterfaces = true;
      const alternativeText = `At the intersection of neuroscience, engineering, and artistic vision, we forge unconventional interfaces that serve as transformative conduits between human perception and physical reality. Our work manifests as a series of enigmatic mediating layers, each meticulously designed to filter, augment, or fundamentally alter the fabric of experiential reality. Drawing inspiration from cutting-edge neuroscience research, our creations are brought to life through rigorous engineering principles, yet remain firmly rooted in the rich soil of artistic expression and design philosophy. We revel in the ambiguous, the unexpected, and the profoundly unique, cultivating a sense of wonder that permeates every facet of our practice. Our portfolio traverses a diverse landscape of human-computer interaction, encompassing such pioneering explorations in dream engineering, cognitive enhancement through memory augmentation, and the development of mindfulness-inducing artifacts. In every project, we seek to redefine the very essence of human interaction with technology and the environment. By reimagining the ways in which we perceive and engage with the world around us, we invite audiences to question their preconceptions and explore new modes of being. Our work stands as a testament to the power of interdisciplinary collaboration and the endless possibilities that emerge when art, science, and technology converge. Contact at strangeinterfaces@gmail.com`;

      function setup() {
        let canvas = createCanvas(windowWidth, windowHeight);
        canvas.parent("p5-canvas");
        textFont("VT323");
        textAlign(CENTER, TOP);
        document.body.addEventListener("click", () => {
          showStrangeInterfaces = !showStrangeInterfaces;
        });
      }

      function draw() {
        clear();
        updateGlitchIntensity();
        if (showStrangeInterfaces) {
          textSize(width * 0.1);
          let strangeHeight = textAscent() + textDescent();
          let interfacesHeight = textAscent() + textDescent();
          let totalHeight = strangeHeight + interfacesHeight;
          drawGlitchText("STRANGE", width / 2, height / 2 - totalHeight / 2);
          drawGlitchText(
            "INTERFACES",
            width / 2,
            height / 2 - totalHeight / 2 + strangeHeight
          );
        } else {
          adjustTextSizeToFit(alternativeText, width * 0.95, height * 0.95);
        }
        drawScanLines();
      }

      function updateGlitchIntensity() {
        if (random() < 0.05) {
          glitchIntensity = random(0.5, 1);
        } else {
          glitchIntensity *= 0.9;
        }
      }

      function drawGlitchText(txt, x, y) {
        push();
        if (random() < glitchIntensity) {
          let r = random(100, 255);
          let g = random(100, 255);
          let b = random(100, 255);
          fill(r, g, b, 200);

          let offsetX = random(-15, 15) * glitchIntensity;
          let offsetY = random(-15, 15) * glitchIntensity;

          text(txt, x + offsetX, y + offsetY);

          fill(r, g, b, 100);
          text(txt, x - offsetX / 2, y - offsetY / 2);
          fill(r, g, b, 50);
          text(txt, x + offsetX / 2, y + offsetY / 2);
        }

        fill(255);
        text(txt, x, y);
        pop();
      }

      function drawWrappedGlitchText(txt, maxWidth, x, y) {
        let words = txt.split(" ");
        let line = "";
        let yOffset = 0;
        let textSizeValue = textSize();

        for (let i = 0; i < words.length; i++) {
          let testLine = line + words[i] + " ";
          let testWidth = textWidth(testLine);
          if (testWidth > maxWidth && line !== "") {
            drawGlitchText(line, x, y + yOffset);
            line = words[i] + " ";
            yOffset += textSizeValue * 1.2;
          } else {
            line = testLine;
          }
        }
        drawGlitchText(line, x, y + yOffset);
      }

      function adjustTextSizeToFit(txt, maxWidth, maxHeight) {
        let words = txt.split(" ");
        let textSizeValue = min(width, height) * 0.04; // Start with a relative size
        textSize(textSizeValue);

        let testHeight;
        do {
          testHeight = 0;
          let line = "";
          for (let word of words) {
            let testLine = line + word + " ";
            let testWidth = textWidth(testLine);
            if (testWidth > maxWidth && line !== "") {
              testHeight += textSizeValue * 1.2;
              line = word + " ";
            } else {
              line = testLine;
            }
          }
          testHeight += textSizeValue * 1.2;

          if (testHeight > maxHeight) {
            textSizeValue *= 0.95;
            textSize(textSizeValue);
          }
        } while (testHeight > maxHeight);

        // Adjust y position to center the text vertically
        let yOffset = (height - testHeight) / 2;
        drawWrappedGlitchText(txt, maxWidth, width / 2, yOffset);
      }

      function drawScanLines() {
        for (let y = 0; y < height; y += 4) {
          stroke(0, 30);
          line(0, y, width, y);
        }
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
        // Force redraw when window is resized
        draw();
      }

      document.addEventListener("DOMContentLoaded", (event) => {
        const video = document.getElementById("video-background");
        video.play().catch((error) => {
          console.error("Autoplay was prevented:", error);
        });
      });
    </script>
  </body>
</html>
