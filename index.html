<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Strange Interfaces</title>
    <link
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        font-family: "VT323", monospace;
      }
      #video-background {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: -1;
        object-fit: cover;
      }
      #p5-canvas {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1;
      }
      #text-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }
      #text-overlay.visible {
        opacity: 1;
        pointer-events: auto;
      }
      #text-content {
        width: 90%;
        height: 90%;
        padding: 5% 0;
        box-sizing: border-box;
        text-align: left;
        overflow: hidden;
        font-size: 3.5vmin;
        line-height: 1.3;
      }
      .link,
      #text-content a {
        color: white;
        text-decoration: none;
        cursor: pointer;
        position: relative;
        display: inline-block;
      }
      .link:hover,
      #text-content a:hover {
        text-decoration: underline;
      }
      .glitch-effect {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
        mix-blend-mode: exclusion;
      }
      @media (max-aspect-ratio: 1/1) {
        #text-content {
          font-size: 4.5vmin;
        }
      }
    </style>
  </head>
  <body>
    <video id="video-background" autoplay loop muted playsinline>
      <source src="strange.mov" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <div id="p5-canvas"></div>
    <div id="text-overlay">
      <div id="text-content"></div>
    </div>
    <script>
      let glitchIntensity = 0;
      let showStrangeInterfaces = true;
      const alternativeText = `
      At the intersection of <span class="link" data-href="https://en.wikipedia.org/wiki/Neuroscience">neuroscience</span>,
      <span class="link" data-href="https://en.wikipedia.org/wiki/Engineering">engineering</span>, and 
      <span class="link" data-href="https://www.google.com">artistic</span> vision, we forge unconventional interfaces that serve as transformative conduits 
      between human perception and physical reality. Our work manifests as a series of enigmatic mediating layers, each meticulously designed to filter, 
      augment, or fundamentally alter the fabric of experiential reality. Drawing inspiration from cutting-edge neuroscience research, our creations are 
      brought to life through rigorous engineering principles, yet remain firmly rooted in the rich soil of artistic expression and design philosophy. We 
      revel in the ambiguous, the unexpected, and the profoundly unique, cultivating a sense of wonder that permeates every facet of our practice. Our 
      portfolio traverses a diverse landscape of <span class="link" data-href="https://en.wikipedia.org/wiki/Human%E2%80%93computer_interaction">human-computer 
      interaction</span>, encompassing such pioneering explorations in dream engineering, cognitive enhancement through memory augmentation, and the development 
      of mindfulness-inducing artifacts. In every project, we seek to redefine the very essence of human interaction with technology and the environment. By 
      reimagining the ways in which we perceive and engage with the world around us, we invite audiences to question their preconceptions and explore new 
      modes of being. Our work stands as a testament to the power of interdisciplinary collaboration and the endless possibilities that emerge when art, science, 
      and technology converge. Contact at <a href="mailto:strangeinterfaces@gmail.com">strangeinterfaces@gmail.com</a>
    `;

      function setup() {
        const canvas = createCanvas(windowWidth, windowHeight);
        canvas.parent("p5-canvas");
        textFont("VT323");
        textAlign(CENTER, CENTER);

        const textContent = document.getElementById("text-content");
        textContent.innerHTML = alternativeText;

        document.body.addEventListener("click", handleClick);

        document.querySelectorAll(".link, #text-content a").forEach((link) => {
          link.addEventListener("click", (e) => {
            e.stopPropagation();
            window.open(e.target.dataset.href || e.target.href, "_blank");
          });
        });

        applyGlitchEffectToLinks();
        adjustFontSizeToFit();
        window.addEventListener("resize", adjustFontSizeToFit);
      }

      function draw() {
        clear();
        updateGlitchIntensity();
        if (showStrangeInterfaces) {
          drawStrangeInterfaces();
        }
        drawScanLines();
      }

      function drawStrangeInterfaces() {
        const fontSize = min(width, height) * 0.1;
        textSize(fontSize);
        const strangeHeight = textAscent() + textDescent();
        const interfacesHeight = textAscent() + textDescent();
        const totalHeight = strangeHeight + interfacesHeight;

        push();
        textAlign(CENTER, CENTER);
        drawGlitchText("STRANGE", width / 2, height / 2 - strangeHeight / 2);
        drawGlitchText(
          "INTERFACES",
          width / 2,
          height / 2 + interfacesHeight / 2
        );
        pop();
      }

      function updateGlitchIntensity() {
        if (random() < 0.05) {
          glitchIntensity = random(0.5, 1);
        } else {
          glitchIntensity *= 0.9;
        }
      }

      function drawGlitchText(txt, x, y) {
        push();
        if (random() < glitchIntensity) {
          const r = random(100, 255);
          const g = random(100, 255);
          const b = random(100, 255);
          fill(r, g, b, 200);

          const offsetX = random(-15, 15) * glitchIntensity;
          const offsetY = random(-15, 15) * glitchIntensity;

          text(txt, x + offsetX, y + offsetY);

          fill(r, g, b, 100);
          text(txt, x - offsetX / 2, y - offsetY / 2);
          fill(r, g, b, 50);
          text(txt, x + offsetX / 2, y + offsetY / 2);
        }

        fill(255);
        text(txt, x, y);
        pop();
      }

      function applyGlitchEffectToLinks() {
        const links = document.querySelectorAll(".link, #text-content a");
        links.forEach((link) => {
          const glitchElement = document.createElement("span");
          glitchElement.className = "glitch-effect";
          glitchElement.textContent = link.textContent;
          link.appendChild(glitchElement);

          setInterval(() => {
            if (random() < 0.1) {
              const r = Math.floor(random(100, 255));
              const g = Math.floor(random(100, 255));
              const b = Math.floor(random(100, 255));
              const offsetX = random(-3, 3);
              const offsetY = random(-3, 3);
              glitchElement.style.color = `rgb(${r},${g},${b})`;
              glitchElement.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
              glitchElement.style.opacity = random(0.5, 0.8);
            } else {
              glitchElement.style.opacity = "0";
            }
          }, 50);
        });
      }

      function drawScanLines() {
        for (let y = 0; y < height; y += 4) {
          stroke(0, 30);
          line(0, y, width, y);
        }
      }

      function handleClick(event) {
        if (
          event.target.classList.contains("link") ||
          event.target.tagName === "A"
        ) {
          return;
        }
        const textOverlay = document.getElementById("text-overlay");
        showStrangeInterfaces = !showStrangeInterfaces;
        textOverlay.classList.toggle("visible", !showStrangeInterfaces);
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
        adjustFontSizeToFit();
        draw();
      }

      function adjustFontSizeToFit() {
        const textContent = document.getElementById("text-content");
        let fontSize = 3.5;
        textContent.style.fontSize = `${fontSize}vmin`;
        while (
          textContent.scrollHeight > textContent.clientHeight &&
          fontSize > 1
        ) {
          fontSize -= 0.1;
          textContent.style.fontSize = `${fontSize}vmin`;
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const video = document.getElementById("video-background");
        video.play().catch((error) => {
          console.error("Autoplay was prevented:", error);
        });
      });
    </script>
  </body>
</html>
